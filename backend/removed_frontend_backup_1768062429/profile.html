<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=DM+Sans:400,500,700&display=swap" rel="stylesheet">
  <title>Profile - TimelinePlus</title>
  <link href="/css/site.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
</head>
<body>
  <div id="gradient"></div>
  <header class="header container d-flex justify-content-between align-items-center"><div class="brand"><img src="/logo.png" height="28"> <span>TimelinePlus</span></div>
  <nav class="nav"><a href="/dashboard.html">Home</a><a href="/tasks.html">Tasks</a><a href="/profile.html">Profile</a><a href="/login.html">Login</a></nav></header>
  <main class="container">
    <div class="card"><h3>Your Profile</h3><div id="profileInfo"></div></div>
    <div class="card"><h5>Linked Accounts</h5><div id="linked"></div><div style="margin-top:10px"><button id="linkFB" class="btn">Link Facebook</button></div></div>
  </main>
  <footer class="footer"><div class="container">© TimelinePlus 2026 • <a href="/about.html">About</a> • <a href="/terms.html">Terms</a> • <a href="/privacy.html">Privacy</a> • <a href="/contact.html">Contact</a></div></footer>
  <div class="toast-container"></div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/common.js"></script>
  <script>
    async function loadProfile(){ const res = await TP.API('/api/user/me'); if(res.user){ document.getElementById('profileInfo').innerHTML = `<p>${res.user.email} ${res.user.username?'- '+res.user.username:''}</p><p>Balance: ${res.balance}</p>`; const linked = document.getElementById('linked'); linked.innerHTML=''; (res.social||[]).forEach(s=>{ const d=document.createElement('div'); d.innerText = `${s.provider} - ${s.providerUserId} (${s.status})`; linked.appendChild(d); }); } else { document.getElementById('profileInfo').innerHTML = '<a href="/login.html">Login to see profile</a>'; }}
    loadProfile();
    document.getElementById('linkFB').addEventListener('click', ()=>TP.showToast('Info','Use the FB button inside connect flow (client-side)'));
  </script>
</body>
</html>